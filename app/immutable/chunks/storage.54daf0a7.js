var f=Object.defineProperty;var w=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>(w(e,typeof t!="symbol"?t+"":t,n),n);import{b as y}from"./paths.0aafc88c.js";const v="1.1.0",d=typeof window<"u"&&typeof document<"u",l=d?window.navigator.userAgent:"",S=d&&(l.indexOf(" Firefox/")!==-1||l.indexOf(" Gecko/")!==-1),m=!(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id),C=typeof ClipboardItem<"u",I=()=>document.querySelector(".wdt"),x=()=>document.getElementById("wdtInput"),j=()=>{var e;return(e=x())==null?void 0:e.focus()},M=async()=>await document.fonts.ready;function k(){const e=document.querySelector(".wdt-input select");if(!e)return;const t=e.cloneNode(),n=document.createElement("option");n.textContent=e.options[e.selectedIndex].text,t.style.width="auto",t.style.visibility="hidden",t.style.position="fixed",t.appendChild(n),e.after(t),e.style.width=`${t.getBoundingClientRect().width}px`,e.classList.remove("unloaded"),t.remove()}function B(e){e&&window.resizeBy(Math.ceil(e.width-window.innerWidth),Math.ceil(e.height-window.innerHeight))}async function G(){if(!m)return;const e=chrome.runtime.getURL("index.html"),t=I().getBoundingClientRect(),[n,o]=[t.width+30,t.height+50];S?window.open(e,"devToolboxPopout",`resizable,width=${n},height=${o}`):await chrome.windows.create({url:e,type:"popup",width:Math.ceil(n),height:Math.ceil(o)}),window.close()}function*_(e,t){for(let n=0;n<e.length;n+=t)yield e.slice(n,n+t)}function N(e){const t=document.getElementById(e);t&&(t.scrollTop=0)}function W(e=""){return y.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")}const b=(e,t)=>{const n=t.length;for(let o=0;o<n;o++){if(e==null)return;e=e[t[o]]}return n?e:void 0},h=(e,t,n)=>{if(t==null)return e;const o=b(e,t.split("."));return o===void 0?n:o};function $(e){if(!e.length)return e;const t=e.sort((s,r)=>s[0]-r[0]),n=[];let o=t[0];n.push(o);for(const s of t){const r=o[1],[a,g]=s;r>=a?o[1]=Math.max(r,g):(o=s,n.push(o))}return n}const R=(e,t)=>e.localeCompare(t,void 0,{numeric:!0})===1,c=[{version:"1.1.0",run:e=>{const t={"inputs.hash":"hashInput","inputs.encode":"encodeInput","inputs.decode":"decodeInput","inputs.number":"numberInput","inputs.time":"timeInput","inputs.net":"netInput","inputs.emoji":"emojiInput","types.number":"numberInputType","types.time":"timeInputType",lastNavClicked:"lastRoute",onlyGithubEmoji:"emojiGhOnly",darkModeEnabled:"darkModeEnabled"},n=e.state,o={};for(const[s,r]of Object.entries(t)){const a=h(n,s);a!=null&&(o[r]=a)}e.state=o}}];function E(e,t){const n=e.get("appVersion","1.0.0");if(t??(t=v),n===t)return Promise.resolve();if(!e.isEmpty()){let o=c.findIndex(s=>R(s.version,n));if(o!==-1)for(;o<c.length;o++)console.log(`Running migration for ${c[o].version}`),c[o].run(e)}return e.set("appVersion",t).save()}const i="state";class p{constructor(){u(this,"_state",{})}get state(){return this._state}set state(t){this._state=t}async init(){return this.state=await this.load()||{},this.migrate()}get(t,n){return h(this.state,t,n)}set(t,n){return this._state[t]=n,this}async migrate(){return E(this)}isEmpty(){return Object.keys(this.state).length===0}has(t){return this.get(t)!==void 0}}class P extends p{constructor(){super(...arguments);u(this,"chromeStorageApi",chrome.storage.local)}async load(){return new Promise(n=>{this.chromeStorageApi.get(i,o=>{const s=o[i];if(s!=null){n(s);return}n(null)})})}async save(){const n={[i]:this.state};return new Promise(o=>{this.chromeStorageApi.set(n,()=>{o()})})}async flush(){return new Promise(n=>{this.chromeStorageApi.remove(i,()=>{n()})})}}class O extends p{async load(){const t=window.localStorage.getItem(i);if(t!=null){const n=JSON.parse(t);if(n!=null)return Promise.resolve(n)}return Promise.resolve(null)}async save(){const t=JSON.stringify(this.state);return window.localStorage.setItem(i,t),Promise.resolve()}async flush(){return window.localStorage.removeItem(i),Promise.resolve()}}const z=m?new P:new O;export{C as a,_ as b,G as c,N as d,k as e,j as f,I as g,B as h,M as i,$ as m,m as r,z as s,W as u};
