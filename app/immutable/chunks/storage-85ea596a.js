var f=Object.defineProperty;var g=(t,e,n)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var a=(t,e,n)=>(g(t,typeof e!="symbol"?e+"":e,n),n);import{c as w}from"./shared-23917130.js";const y="1.1.0",u=typeof window<"u"&&typeof document<"u",l=u?window.navigator.userAgent:"",v=u&&(l.indexOf(" Firefox/")!==-1||l.indexOf(" Gecko/")!==-1),d=!(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id),T=typeof ClipboardItem<"u",S=()=>document.querySelector(".wdt"),I=()=>document.getElementById("wdtInput"),C=()=>{var t;return(t=I())==null?void 0:t.focus()},M=async()=>await document.fonts.ready;function R(t){const e=[];return t.forEach(n=>{e.push(typeof n=="string"?n:Object.entries(n).filter(([i,o])=>i!==""&&o).map(([i])=>i).join(" "))}),e.join(" ")}function k(){let t=document.querySelector(".wdt-input select");if(!t)return;let e=t.cloneNode(),n=document.createElement("option");n.textContent=t.options[t.selectedIndex].text,e.style.width="auto",e.style.visibility="hidden",e.style.position="fixed",e.appendChild(n),t.after(e),t.style.width=`${e.getBoundingClientRect().width}px`,t.classList.remove("unloaded"),e.remove()}function B(t){t&&window.resizeBy(Math.ceil(t.width-window.innerWidth),Math.ceil(t.height-window.innerHeight))}async function G(){if(!d)return;const t=chrome.runtime.getURL("index.html"),e=S().getBoundingClientRect(),[n,i]=[e.width+30,e.height+50];v?window.open(t,"devToolboxPopout",`resizable,width=${n},height=${i}`):await chrome.windows.create({url:t,type:"popup",width:Math.ceil(n),height:Math.ceil(i)}),window.close()}function*_(t,e){for(let n=0;n<t.length;n+=e)yield t.slice(n,n+e)}function N(t){let e=document.getElementById(t);e&&(e.scrollTop=0)}function W(t=""){return w.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}const b=(t,e)=>{let n=e.length;for(let i=0;i<n;i++){if(t==null)return;t=t[e[i]]}return n?t:void 0},h=(t,e,n)=>{if(e==null)return t;let i=b(t,e.split("."));return i===void 0?n:i},x=(t,e)=>t.localeCompare(e,void 0,{numeric:!0})===1,r=[{version:"1.1.0",run:t=>{const e={"inputs.hash":"hashInput","inputs.encode":"encodeInput","inputs.decode":"decodeInput","inputs.number":"numberInput","inputs.time":"timeInput","inputs.net":"netInput","inputs.emoji":"emojiInput","types.number":"numberInputType","types.time":"timeInputType",lastNavClicked:"lastRoute",onlyGithubEmoji:"emojiGhOnly",darkModeEnabled:"darkModeEnabled"};let n=t.state,i={};for(const[o,p]of Object.entries(e)){let c=h(n,o);c!=null&&(i[p]=c)}t.state=i}}];function E(t,e){const n=t.get("appVersion","1.0.0");if(e??(e=y),n===e)return Promise.resolve();if(!t.isEmpty()){let i=r.findIndex(o=>x(o.version,n));if(i!==-1)for(;i<r.length;i++)console.log(`Running migration for ${r[i].version}`),r[i].run(t)}return t.set("appVersion",e).save()}const s="state";class m{constructor(){a(this,"_state",{})}get state(){return this._state}set state(e){this._state=e}async init(){return this.state=await this.load()||{},this.migrate()}get(e,n){return h(this.state,e,n)}set(e,n){return this._state[e]=n,this}async migrate(){return E(this)}isEmpty(){return Object.keys(this.state).length===0}has(e){return this.get(e)!==void 0}}class P extends m{constructor(){super(...arguments);a(this,"chromeStorageApi",chrome.storage.local)}async load(){return new Promise(n=>{this.chromeStorageApi.get(s,i=>{const o=i[s];if(o!=null){n(o);return}n(null)})})}async save(){const n={[s]:this.state};return new Promise(i=>{this.chromeStorageApi.set(n,()=>{i()})})}async flush(){return new Promise(n=>{this.chromeStorageApi.remove(s,()=>{n()})})}}class j extends m{async load(){let e=window.localStorage.getItem(s);if(e!=null){const n=JSON.parse(e);if(n!=null)return Promise.resolve(n)}return Promise.resolve(null)}async save(){const e=JSON.stringify(this.state);return window.localStorage.setItem(s,e),Promise.resolve()}async flush(){return window.localStorage.removeItem(s),Promise.resolve()}}const $=d?new P:new j;export{R as a,k as b,G as c,C as d,T as e,M as f,S as g,B as h,_ as i,N as j,d as r,$ as s,W as u};
